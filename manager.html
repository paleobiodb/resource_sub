<!-- REQUIRES_LOGIN=1; -->
<!-- This web form allows submission and editing of external project resources -->
<!-- for the Paleobiology Database using the Paleobiology Database API. -->
<!-- Authors: Michael McClennen, Valerie Syverson, Julian Jenkins -->

<link rel="stylesheet" type="text/css" href="%%app_resources%%/resource-sub.css">

<script src="%%app_resources%%/resource-sub.js" language="JavaScript" type="text/javascript">
</script>
<script src="%%app_resources%%/manager.js" language="JavaScript" type="text/javascript">
</script>

<script language="JavaScript" type="text/javascript">
  var pageapp = new ResourceManagerApp('%%data_url%%', 'manage');
  document.addEventListener("DOMContentLoaded", pageapp.init, false);
</script>

<div class="container mx-md-4" style="width: 90%">

<!-- Title and Introduction -->

<div class="row">
  <h2 style="margin-top: 0px">Manage Educational Resources</h2>
  <div class="col-sm-12">
    <p class="small text-left">
      This form can be used to approve educational resource submissions, and also to activate,
      deactivate, and edit existing resources. In order to use this form, you must be given the
      <i>admin</i> permission on Educational Resources by a site administrator.</p><br>
   </div>
</div>  

<!-- Select a resource to manipulate -->

<div class="row">
  <div class="col-sm-12" role="navigation">
    <ul class="nav nav-tabs nav-justified" id="nav-tabs"> <!-- tabbar -->
      <li class="nav-item">
	<a href="#pending" class="nav-link" onClick="pageapp.listResources('#pending');">Pending</a>
      <li class="nav-item">
	<a href="#active" class="nav-link" onClick="pageapp.listResources('#active');">Active</a>
      <li class="nav-item">
	<a href="#inactive" class="nav-link" onClick="pageapp.listResources('#inactive');">Inactive</a>
    </ul>
  </div>
</div>

<div class="row">
  <div class="col-sm-12 resource-list">
    <select id="res-selector"  size="10" style="width: inherit"
	    onclick="pageapp.selectResource()">
    </select>
  </div>
</div>

<div class="row">
  <div class="col-sm-8">
    <p align="left" class="small">
      <b>Active</b> resources are currently visible to the public. <b>Pending</b> resources are
      newly submitted. <b>Changed</b> resource records have been modified by their
      submitter. The changes will become publicly visible when approved, and meanwhile the old
      version remains visible on the website. <b>Inactive</b> resources are not visible on the
      public website, but remain in the system for later use. When you <b>delete</b> a record, it
      vanishes from the system completely and cannot be restored.</p>
  </div>
  <div class="form-group">
    <button type="button" id="btn-activate" class="btn btn-primary"
	    onclick="pageapp.changeResourceStatus('activate')"> Activate </button>
    <button type="button" id="btn-inactivate" class="btn btn-primary"
	    onclick="pageapp.changeResourceStatus('inactivate')"> Inactivate </button>
    <button type="button" id="btn-delete" class="btn btn-primary"
	    onclick="pageapp.deleteResource()"> Delete </button>
  </div>
  <div class="form-group">
    <button type="button" class="btn" onclick="pageapp.clearSelection()">
      Clear selection </button>
  </div>
</div>

<!-- Edit Resource Attributes -->

<hr>

<form id="res-edit" class="form-horizontal">
  
  [[editform.html]]

  <div class="form-group" style="margin-top: 24px;">
    <button type="button" class="btn btn-primary" onclick="pageapp.addUpdateResource('approve')">
      Approve</button>
    &nbsp;&nbsp;
    <button type="button" class="btn btn-primary" onclick="pageapp.addUpdateResource('save')">
      Save changes</button>
    &nbsp;&nbsp;
    <button type="button" class="btn btn-primary" onclick="pageapp.changeResourceStatus('revert')"
	    id="btn-discard">
      Discard changes</button>
  </div>

  <div class="form-group" id="msg-pending" style="display: none">
    <p align="left" class="small">
     If you <b>approve</b> this resource, it will then become active and be visible on the public
     website. If you have made changes to any of the fields on this form, you can <b>save</b>
     them without activating the resource.</p>
  </div>

  <div class="form-group" id="msg-changed" style="display: none">
    <p align="left" class="small">
      If you <b>approve</b> the changes to this resource, they will become visible on the public
      website if the resource is currently active. If it is currently inactive, the changes will
      subsequently be visible whenever it is activated in the future. If you have made further
      changes to any of the fields on this form, you can <b>save</b> them without affecting the
      publicly visible entry. If you click <b>discard</b>, all of the changes highlighted on this
      form will be permanently discarded. The resource will revert to the attributes that are
      currently publicly visible.</p>
  </div>
  
</form>

%%errors%%
